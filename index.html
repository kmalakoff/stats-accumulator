<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>stats-accumulator</title><meta name="description" content="Documentation for stats-accumulator"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">stats-accumulator</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>stats-accumulator</h1></div><div class="tsd-panel tsd-typography"><h1 id="stats-accumulator" class="tsd-anchor-link">stats-accumulator<a href="#stats-accumulator" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://nodei.co/npm/stats-accumulator/"><img src="https://nodei.co/npm/stats-accumulator.svg" alt="NPM"></a></p>
<p>A simple tool for calculating incremental stats on numeric streams. Forked from <a href="https://github.com/brycebaril/stats-incremental">stats-incremental</a> for minimal memory and maximum portability.</p>
<p>E.g. given a source of numbers of unknown length that you would like to at any given time know any of:</p>
<ul>
<li>count</li>
<li>min</li>
<li>max</li>
<li>sum</li>
<li>variance</li>
<li>stddev</li>
</ul>
<p>This module can be used either with Node <code>streams</code> via a wrapper such as <code>through2</code> or without being streaming.</p>
<h2 id="example" class="tsd-anchor-link">Example<a href="#example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Non-streaming:</p>
<pre><code class="javascript"><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-2">Stats</span><span class="hl-1"> = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&#39;stats-accumulator&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-2">dice</span><span class="hl-1"> = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&#39;dice&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-2">s</span><span class="hl-1"> = </span><span class="hl-3">Stats</span><span class="hl-1">();</span><br/><br/><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-2">rolls</span><span class="hl-1"> = [];</span><br/><span class="hl-5">for</span><span class="hl-1"> (</span><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> = </span><span class="hl-6">0</span><span class="hl-1">; </span><span class="hl-2">i</span><span class="hl-1"> &lt; </span><span class="hl-6">100</span><span class="hl-1">; </span><span class="hl-2">i</span><span class="hl-1">++) {</span><br/><span class="hl-1">  </span><span class="hl-2">s</span><span class="hl-1">.</span><span class="hl-3">update</span><span class="hl-1">(</span><span class="hl-2">dice</span><span class="hl-1">.</span><span class="hl-3">sum</span><span class="hl-1">(</span><span class="hl-2">dice</span><span class="hl-1">.</span><span class="hl-3">roll</span><span class="hl-1">(</span><span class="hl-4">&#39;2d6&#39;</span><span class="hl-1">)));</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-2">s</span><span class="hl-1">.</span><span class="hl-3">toJSON</span><span class="hl-1">());</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-7">/* E.g.</span><br/><span class="hl-7">  { n: 97,</span><br/><span class="hl-7">  min: 2,</span><br/><span class="hl-7">  max: 12,</span><br/><span class="hl-7">  sum: 673,</span><br/><span class="hl-7">  mean: 6.938144329896907,</span><br/><span class="hl-7">  variance: 5.851843979168881,</span><br/><span class="hl-7">  stddev: 2.419058490233107 }</span><br/><span class="hl-7">*/</span><br/><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-2">s</span><span class="hl-1">.</span><span class="hl-2">mean</span><span class="hl-1">);</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-2">s</span><span class="hl-1">.</span><span class="hl-2">stddev</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>With streams:</p>
<pre><code class="js"><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-2">spigot</span><span class="hl-1"> = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&#39;stream-spigot&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-2">through2</span><span class="hl-1"> = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&#39;through2&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-2">terminus</span><span class="hl-1"> = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&#39;terminus&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-2">Stats</span><span class="hl-1"> = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&#39;stats-accumulator&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-2">s</span><span class="hl-1"> = </span><span class="hl-3">Stats</span><span class="hl-1">();</span><br/><br/><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-2">statStream</span><span class="hl-1"> = </span><span class="hl-2">through2</span><span class="hl-1">.</span><span class="hl-3">obj</span><span class="hl-1">(</span><span class="hl-0">function</span><span class="hl-1"> (</span><span class="hl-2">chunk</span><span class="hl-1">, </span><span class="hl-2">encoding</span><span class="hl-1">, </span><span class="hl-2">callback</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-2">s</span><span class="hl-1">.</span><span class="hl-3">update</span><span class="hl-1">(</span><span class="hl-2">chunk</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">s</span><span class="hl-1">.</span><span class="hl-2">n</span><span class="hl-1"> % </span><span class="hl-6">100000</span><span class="hl-1"> === </span><span class="hl-6">0</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-2">s</span><span class="hl-1">.</span><span class="hl-3">toJSON</span><span class="hl-1">());</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-3">push</span><span class="hl-1">(</span><span class="hl-2">chunk</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">callback</span><span class="hl-1">();</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-2">spigot</span><br/><span class="hl-1">  .</span><span class="hl-3">sync</span><span class="hl-1">({ </span><span class="hl-2">objectMode:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1"> }, </span><span class="hl-2">Math</span><span class="hl-1">.</span><span class="hl-2">random</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-3">pipe</span><span class="hl-1">(</span><span class="hl-2">statStream</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-3">pipe</span><span class="hl-1">(</span><span class="hl-2">terminus</span><span class="hl-1">.</span><span class="hl-3">devnull</span><span class="hl-1">({ </span><span class="hl-2">objectMode:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1"> }));</span><br/><br/><span class="hl-7">/*</span><br/><span class="hl-7">  { n: 100000,</span><br/><span class="hl-7">    min: 2.0884908735752106e-7,</span><br/><span class="hl-7">    max: 0.9999937505926937,</span><br/><span class="hl-7">    sum: 49861.06196602131,</span><br/><span class="hl-7">    mean: 0.49861061966021336,</span><br/><span class="hl-7">    variance: 0.08331362954827709,</span><br/><span class="hl-7">    stddev: 0.28864100462040576 }</span><br/><span class="hl-7">  { n: 200000,</span><br/><span class="hl-7">    min: 2.0884908735752106e-7,</span><br/><span class="hl-7">    max: 0.9999937505926937,</span><br/><span class="hl-7">    sum: 99904.73041411326,</span><br/><span class="hl-7">    mean: 0.49952365207056687,</span><br/><span class="hl-7">    variance: 0.08316120223669865,</span><br/><span class="hl-7">    stddev: 0.2883768406732736 }</span><br/><span class="hl-7">*/</span>
</code><button type="button">Copy</button></pre>

<h1 id="api" class="tsd-anchor-link">API<a href="#api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><h2 id="" class="tsd-anchor-link"><code>const Stats = require(&quot;stats-accumulator&quot;)</code></h2><h2 id="-1" class="tsd-anchor-link"><code>var stats = new Stats(smaBins)</code><a href="#-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Create a new incremental stats aggregator. The <code>smaBins</code> argument is optional (default 50) and will choose the size of recent window to retain to calculate the Simple Moving Average on the recent data.</p>
<h2 id="-2" class="tsd-anchor-link"><code>stats.update(value)</code><a href="#-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Update the aggregator with a value. Converted to a Number via parseFloat. If this results in NaN the update is skipped.</p>
<h2 id="-3" class="tsd-anchor-link"><code>stats.toJSON()</code><a href="#-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Get a up-to-date clone of all of the stats stored.</p>
<p>E.g.</p>
<pre><code class="js"><span class="hl-1">{ </span><span class="hl-8">n</span><span class="hl-1">: </span><span class="hl-6">97</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-8">min</span><span class="hl-1">: </span><span class="hl-6">2</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-8">max</span><span class="hl-1">: </span><span class="hl-6">12</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-8">sum</span><span class="hl-1">: </span><span class="hl-6">673</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-8">mean</span><span class="hl-1">: </span><span class="hl-6">6.938144329896907</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-8">variance</span><span class="hl-1">: </span><span class="hl-6">5.851843979168881</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-8">stddev</span><span class="hl-1">: </span><span class="hl-6">2.419058490233107</span><span class="hl-1"> }</span>
</code><button type="button">Copy</button></pre>

<h2 id="-4" class="tsd-anchor-link"><code>stats.n</code><a href="#-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The count of observations.</p>
<h2 id="-5" class="tsd-anchor-link"><code>stats.min</code><a href="#-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The min value observed.</p>
<h2 id="-6" class="tsd-anchor-link"><code>stats.max</code><a href="#-6" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The max value observed.</p>
<h2 id="-7" class="tsd-anchor-link"><code>stats.sum</code><a href="#-7" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The sum of all values observed.</p>
<h2 id="-8" class="tsd-anchor-link"><code>stats.mean</code><a href="#-8" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The arithmetic mean of the observations.</p>
<h2 id="-9" class="tsd-anchor-link"><code>stats.variance</code><a href="#-9" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The variance from the mean.</p>
<h2 id="-10" class="tsd-anchor-link"><code>stats.stddev</code><a href="#-10" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The standard deviation of the values from the mean.</p>
<h2 id="alternatives" class="tsd-anchor-link">Alternatives<a href="#alternatives" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><a href="http://npm.im/stats-lite">stats-lite</a> Operates on complete sets of numbers.</p>
<p><a href="http://npm.im/stream-statistics">stream-statistics</a> Is a similar module dedicated to streams.</p>
<p><a href="http://npm.im/stats-incremental">stats-incremental</a> Is the original module, but it accumulates a moving average.</p>
<h1 id="license" class="tsd-anchor-link">LICENSE<a href="#license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>MIT</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#stats-accumulator"><span>stats-<wbr/>accumulator</span></a><ul><li><a href="#example"><span>Example</span></a></li></ul><a href="#api"><span>API</span></a><ul><li><a href="#"><span></span></a></li><li><a href="#-1"><span></span></a></li><li><a href="#-2"><span></span></a></li><li><a href="#-3"><span></span></a></li><li><a href="#-4"><span></span></a></li><li><a href="#-5"><span></span></a></li><li><a href="#-6"><span></span></a></li><li><a href="#-7"><span></span></a></li><li><a href="#-8"><span></span></a></li><li><a href="#-9"><span></span></a></li><li><a href="#-10"><span></span></a></li><li><a href="#alternatives"><span>Alternatives</span></a></li></ul><a href="#license"><span>LICENSE</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">stats-accumulator</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
